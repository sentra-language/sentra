// Test network performance improvements
log("=== Network Performance Test ===")

// Test 1: Port scanning
log("\n1. Port Scanning Test")
let start = time_now()
let ports = [22, 80, 443, 8080, 3306, 5432]
let results = net_scan_ports("127.0.0.1", ports)
let elapsed = time_now() - start
log("Scanned " + str(len(ports)) + " ports in " + str(elapsed) + "ms")

// Test 2: DNS lookup
log("\n2. DNS Lookup Test")
let start2 = time_now()
let dns_result = net_resolve("google.com")
let elapsed2 = time_now() - start2
log("DNS lookup completed in " + str(elapsed2) + "ms")

// Test 3: HTTP request
log("\n3. HTTP Request Test")
let start3 = time_now()
let http_result = http_get("https://httpbin.org/get")
let elapsed3 = time_now() - start3
log("HTTP request completed in " + str(elapsed3) + "ms")

// Test 4: Batch scanning
log("\n4. Batch Scanning Test")
let hosts = ["127.0.0.1", "localhost", "8.8.8.8"]
let start4 = time_now()
for host in hosts {
    net_scan_ports(host, [80, 443])
}
let elapsed4 = time_now() - start4
log("Batch scan of " + str(len(hosts)) + " hosts completed in " + str(elapsed4) + "ms")

log("\n=== Performance Summary ===")
log("Total operations: 4")
log("Average latency: " + str((elapsed + elapsed2 + elapsed3 + elapsed4) / 4) + "ms")
log("Target: <100ms per operation for security scanning")