fn bubbleSort(arr) {
    // Create a copy
    let result = []
    for item in arr {
        result.push(item)
    }
    
    let n = len(result)
    log("Starting sort, n=" + n)
    
    // Do n-1 passes
    let pass = 0
    while pass < n - 1 {
        log("Pass " + pass)
        let i = 0
        let limit = n - pass - 1
        log("  Will compare " + limit + " pairs")
        while i < limit {
            let val1 = result[i]
            let val2 = result[i + 1]
            log("    Comparing result[" + i + "]=" + val1 + " with result[" + (i+1) + "]=" + val2)
            if val1 > val2 {
                log("      Swapping!")
                result[i] = val2
                result[i + 1] = val1
            }
            i = i + 1
        }
        log("  After pass: " + result)
        pass = pass + 1
    }
    return result
}

let test = [64, 34, 25]
log("Sorted: " + bubbleSort(test))