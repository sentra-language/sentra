log("Testing for-in loop with scan results")
let scan_results = advanced_port_scan("127.0.0.1", 80, 83, "tcp_connect")
log("• Ports scanned: " + len(scan_results))
let open_ports = 0
log("Starting loop over " + len(scan_results) + " results")
for result in scan_results {
    log("Processing result: " + result["port"])
    if result["state"] == "open" {
        open_ports = open_ports + 1
    }
}
log("• Open ports found: " + open_ports)
log("Done")
