fn bubbleSort(arr) {
    // Create a copy
    let result = []
    for item in arr {
        result.push(item)
    }
    
    let n = len(result)
    
    // First pass
    let i = 0
    while i < n - 1 {
        log("i=" + i)
        log("  result before: " + result)
        if result[i] > result[i + 1] {
            log("  Need to swap")
            // Store values before swap
            let idx1 = i
            let idx2 = i + 1
            log("    idx1=" + idx1 + ", idx2=" + idx2)
            let a = result[idx1]
            let b = result[idx2]
            log("    a (result[" + idx1 + "]) = " + a)
            log("    b (result[" + idx2 + "]) = " + b)
            // Swap
            result[idx1] = b
            log("    After setting result[" + idx1 + "]=" + b + ": " + result)
            result[idx2] = a
            log("    After setting result[" + idx2 + "]=" + a + ": " + result)
        }
        i = i + 1
    }
    
    return result
}

let test = [64, 34, 25]
bubbleSort(test)